var e,l,v,c;const T="pk.eyJ1IjoibHVjYXNjYW1wYmVsbCIsImEiOiJjbGs0MnQxcTAwbTU1M2ZtcjA2ZXU0cDZqIn0.frU8JiLhGAEKgzD6qfiHAg";function I(){mapboxgl.accessToken=T,console.log(T),e=new mapboxgl.Map({container:"map",style:"mapbox://styles/mapbox/streets-v11",center:[-85.6472,42.2759],zoom:11}),e.on("load",function(){e.addSource("boundary",{type:"geojson",data:"assets/boundary.geojson"}),e.addLayer({id:"boundary-layer",type:"fill",source:"boundary",paint:{"fill-color":"#FF0000","fill-opacity":.35}})}),e.on("sourcedata",function(t){t.isSourceLoaded&&t.sourceId==="boundary"&&(l=e.getSource("boundary"),c=e.queryRenderedFeatures({layers:["boundary-layer"]}),console.log(l))});const u=new MapboxGeocoder({accessToken:mapboxgl.accessToken,mapboxgl,placeholder:"Search for an address"});e.addControl(u),v=document.getElementById("historyTable").getElementsByTagName("tbody")[0],u.on("result",function(t){var p=t.result,n=p.center,w=t.result.place_name,y=t.result.address+" "+t.result.text,o=!1;console.log("Set variable to initial value (should be false)",o);for(var r=0;r<c.length;r++){var E=c[r],g=E.geometry;if(g.type==="Polygon"){console.log("if statement ran");var L=turf.polygon(g.coordinates),m=turf.point([n[0],n[1]]);if(console.log("Point should change each time",m),turf.booleanPointInPolygon(m,L)){o=!0,console.log("Point is inside boundary. Setting to true:",o);break}console.log("Turf is not inside boundary. Set to false:",o)}}o?Toastify({text:y+" is eligible",duration:3e3,gravity:"top",position:"right",stopOnFocus:!0,style:{background:"linear-gradient(to right, #27d895, #36c98b)",width:"400px","max-width":"90%","font-size":"21px"}}).showToast():Toastify({text:y+" is not eligible",duration:3e3,gravity:"top",position:"right",stopOnFocus:!0,style:{background:"linear-gradient(to right, #e8172f, #d42b35)",width:"400px","max-width":"90%","font-size":"21px"}}).showToast();var b=new mapboxgl.Marker().setLngLat(n).addTo(e),h=new mapboxgl.Popup().setLngLat(n).setHTML(p.place_name).addTo(e);b.setPopup(h),h.addTo(e);const a=document.createElement("tr");a.className="bg-white border-t-2 border-b-2 dark:bg-gray-900 dark:border-gray-700";const s=document.createElement("th");s.className="px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white",s.textContent=w;const d=document.createElement("td");d.className="px-6 py-4",d.textContent=o?"Yes":"No";const i=document.createElement("td");i.className="px-6 py-4",i.textContent="",a.appendChild(s),a.appendChild(d),a.appendChild(i);const f=document.getElementById("historyBody");document.getElementById("historyTable").classList.contains("hidden")&&document.getElementById("historyTable").classList.remove("hidden");const x=f.firstChild;x?f.insertBefore(a,x):v.appendChild(a),b.remove(),l=null}),document.getElementById("clearTable").addEventListener("click",function(){document.getElementById("historyBody").innerHTML="",document.getElementById("historyTable").classList.add("hidden")})}document.addEventListener("DOMContentLoaded",function(){I()});
